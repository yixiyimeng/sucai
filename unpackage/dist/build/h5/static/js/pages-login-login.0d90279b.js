(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"15bd":function(t,i,e){"use strict";var a=e("9b40"),n=e.n(a);n.a},"1c64":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("5176")),s=a(e("cebc")),o=e("5335"),c=(e("5335"),e("2f62")),l={data:function(){return{registeMobile:"",nickName:"",verifyNum:"",password:"",codetxt:"获取验证码",num:60,timer:null,isMobileAvailabled:!1,isCheckmobile:!1,isChecknickName:!1,isNickNameAvailabled:!1,TabCur:0,showModal:!1,wxqrtimer:null,qrimg:""}},components:{},computed:{isAble:function(){return this.isMobileAvailabled&&(this.verifyNum||this.password)}},destroyed:function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.wxqrtimer&&(clearInterval(this.wxqrtimer),this.wxqrtimer=null),this.codetxt="获取验证码",this.num=60},methods:(0,s.default)({},(0,c.mapMutations)(["SET_LOGIN"]),{changeMobile:function(t){this.registeMobile!=t.detail.value&&(this.registeMobile=t.detail.value,(0,o.regPhone)(this.registeMobile)&&this.checkmobile())},changeCode:function(t){this.verifyNum=t.detail.value},getcode:function(){var t=this;if(this.num<60)return!1;(0,o.regPhone)(this.registeMobile)?(t.codetxt=this.num+"s",this.timer=setInterval(function(){1==t.num?(clearInterval(t.timer),t.timer=null,t.codetxt="验证码",t.num=60):(t.num--,t.codetxt=t.num+"s")},1e3),this.$getajax(this.$api.getcode,{mobile:this.registeMobile,codetype:"login"}).then(function(t){uni.showToast({title:t.message,icon:"none"})})):uni.showToast({title:"请输入正确的手机号码",icon:"none"})},submitLogin:function(){var t=this;if(this.isAble){var i={};i=0==this.TabCur?{password:this.password,operation:"password"}:{verifyNum:this.verifyNum,operation:"verifynum"},this.$postajax(this.$api.login,(0,n.default)({},i,{registeMobile:this.registeMobile})).then(function(i){1e4==i.code?(uni.setStorageSync("token",i.userInfo.token),t.SET_LOGIN(i.userInfo),setTimeout(function(){uni.switchTab({url:"/pages/index/index"})},500)):uni.showToast({title:i.message,icon:"none"})})}},checkmobile:function(){var t=this;this.isCheckmobile=!0,this.$getajax(this.$api.isLoginAvailabled,{mobile:this.registeMobile}).then(function(i){1e4==i.code?t.isMobileAvailabled=!0:t.isMobileAvailabled=!1}).catch(function(){t.isMobileAvailabled=!1}).finally(function(){t.isCheckmobile=!1})},checknickName:function(t){this.nickName!=t.detail.value&&(this.nickName=t.detail.value,this.nickName?this.isNickNameAvailabled=!0:this.isNickNameAvailabled=!1)},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id},showWxlogin:function(){var t=this;this.$getajax(this.$api.getWxqrUrl,{operation:"login"}).then(function(i){1e4==i.code&&(t.qrimg=i.url,t.wxqrtimer=setInterval(function(){t.wechatCheckLogin(i.sceneStr)},3e3),t.showModal=!0)})},wechatCheckLogin:function(t){var i=this;this.$getajax(this.$api.wechatCheckLogin,{sceneStr:t}).then(function(t){1e4==t.code&&i.hideModal()})},hideModal:function(){this.showModal=!1,this.wxqrtimer&&(clearInterval(this.wxqrtimer),this.wxqrtimer=null)}})};i.default=l},2007:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".pageview[data-v-3a85cff3],uni-page-body[data-v-3a85cff3]{height:100%;width:100%}.otherway[data-v-3a85cff3]{text-align:center;font-size:%?26?%;padding-bottom:%?30?%;color:#878787}.otherway .title[data-v-3a85cff3]{margin:0 %?30?%;font-weight:700}.otherway .title .line[data-v-3a85cff3]{height:1px;background:#e5e5e5}.otherway .title>uni-view[data-v-3a85cff3]:nth-child(2){margin:0 %?30?%}.otherway .wechat[data-v-3a85cff3]{background:#fff;font-size:%?26?%;border:none}.otherway uni-image[data-v-3a85cff3]{display:block;margin:%?35?% auto %?25?%;width:%?116?%}.otherway uni-navigator[data-v-3a85cff3]{display:inline-block}.cu-form-group .title[data-v-3a85cff3]{min-width:calc(4em + 15px)}.getcode[data-v-3a85cff3]{width:%?200?%}.submitBtn[data-v-3a85cff3]{line-height:%?100?%;height:%?100?%;border-radius:%?16?%;font-size:%?32?%;display:block;margin-left:%?40?%;margin-right:%?40?%}.loading[data-v-3a85cff3]{height:20px;width:20px}.imgbox[data-v-3a85cff3]{width:100%}",""])},6005:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"flex flex-direction pageview bg-white"},[e("cu-custom",{attrs:{isHome:!0}},[e("v-uni-view",{attrs:{slot:"content"},slot:"content"},[t._v("登录")])],1),e("v-uni-scroll-view",{staticClass:"bg-white nav text-center margin-top",attrs:{"scroll-x":""}},t._l(2,function(i,a){return e("v-uni-view",{key:a,staticClass:"cu-item",class:a==t.TabCur?"text-orange cur":"",attrs:{"data-id":a},on:{click:function(i){i=t.$handleEvent(i),t.tabSelect(i)}}},[t._v(t._s(0==a?"密码登录":"快捷登录"))])}),1),e("v-uni-view",{staticClass:"flex-sub"},[e("v-uni-form",{staticClass:"margin-top"},[e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("手机号码")]),e("v-uni-input",{attrs:{placeholder:"输入注册时用的手机号码",name:"input"},on:{blur:function(i){i=t.$handleEvent(i),t.changeMobile(i)}}}),t.isCheckmobile?e("v-uni-image",{staticClass:"loading text-orange",attrs:{src:"#",mode:"widthFix"}}):t._e()],1),1==t.TabCur?e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("验证码")]),e("v-uni-input",{attrs:{placeholder:"输入验证码",name:"input"},model:{value:t.verifyNum,callback:function(i){t.verifyNum=i},expression:"verifyNum"}}),e("v-uni-button",{staticClass:"getcode cu-btn shadow",class:{"bg-orange":t.isMobileAvailabled&&!t.timer},on:{click:function(i){i=t.$handleEvent(i),t.getcode(i)}}},[t._v(t._s(t.codetxt))])],1):t._e(),0==t.TabCur?e("v-uni-view",{staticClass:"cu-form-group solid-bottom"},[e("v-uni-view",{staticClass:"title"},[t._v("密码")]),e("v-uni-input",{attrs:{placeholder:"5~20位英文、数字或符号，区分大小写",name:"input",type:"password"},model:{value:t.password,callback:function(i){t.password=i},expression:"password"}})],1):t._e()],1),e("v-uni-view",{staticClass:"margin-top-lg submitBtn cu-btn shadow",class:{"bg-orange":t.isAble},on:{click:function(i){i=t.$handleEvent(i),t.submitLogin(i)}}},[t._v("登录")]),e("v-uni-view",{staticClass:"margin-lg flex justify-between"},[e("v-uni-navigator",{staticClass:"text-orange",attrs:{"hover-class":"none",url:"/pages/reg/reg"}},[e("v-uni-text",{staticClass:"text-grey"},[t._v("还没有注册账号？")]),e("v-uni-text",[t._v("立即注册")]),e("v-uni-text",{staticClass:"cuIcon-right"})],1)],1)],1),e("v-uni-view",{staticClass:"cu-modal",class:t.showModal?"show":""},[e("v-uni-view",{staticClass:"cu-dialog"},[e("v-uni-view",{staticClass:"imgbox"},[e("v-uni-image",{attrs:{src:t.qrimg,mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"cu-bar bg-white"},[e("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(i){i=t.$handleEvent(i),t.hideModal(i)}}},[t._v("扫描二维码登录")])],1)],1)],1)],1)},n=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return n})},"70e2":function(t,i,e){"use strict";e.r(i);var a=e("1c64"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);i["default"]=n.a},"81da":function(t,i,e){"use strict";e.r(i);var a=e("6005"),n=e("70e2");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("15bd");var o=e("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"3a85cff3",null);i["default"]=c.exports},"9b40":function(t,i,e){var a=e("2007");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("39c60000",a,!0,{sourceMap:!1,shadowMode:!1})}}]);